---
import config from 'virtual:active-handout/user-config';
import Page from './layout/Page.astro';
import NotFound from "./components/NotFound/index.astro";
import { useTranslations } from './utils/translations';
import { get404Entry } from "./utils/not-found";
import { AstroComponentFactory } from 'astro/dist/runtime/server';
import { Handout } from './schema';

const t = useTranslations(config.lang);

let template: Handout["template"] = "splash";
let Content: AstroComponentFactory = NotFound;
let headings = [];
const entry = await get404Entry();
if (entry) {
  const renderedEntry = await entry.render();
  Content = renderedEntry.Content;
  headings = renderedEntry.headings;
  template = entry.data.template;
}
---

<Page title={t("404.title")} {headings} template={template}>
  <Content />
</Page>
